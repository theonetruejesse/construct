(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4420:(e,t,s)=>{Promise.resolve().then(s.bind(s,6990))},6990:(e,t,s)=>{"use strict";s.d(t,{Chat:()=>u});var l=s(3611),r=s(1301),n=s(171);let a=s(7359).dp;function o(e){let{username:t}=e,[s,o]=(0,n.useState)(""),d=(0,r.n_)(a.messages.send),u=async e=>{e.preventDefault(),s.trim()&&(await d({text:s,author:t}),o(""))};return(0,l.jsxs)("form",{onSubmit:u,className:"flex gap-2 border-t p-4",children:[(0,l.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),placeholder:"Type your message...",className:"flex-1 rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:outline-none"}),(0,l.jsx)("button",{type:"submit",className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:outline-none",children:"Send"})]})}function d(e){let{author:t,text:s,isCurrentUser:r}=e;return(0,l.jsx)("div",{className:"flex ".concat(r?"justify-end":"justify-start"," mb-4"),children:(0,l.jsxs)("div",{className:"max-w-[70%] break-words rounded-lg px-4 py-2 ".concat(r?"self-end bg-blue-500 text-white":"self-start bg-gray-200 text-gray-800"),children:[(0,l.jsx)("div",{className:"font-bold text-sm",children:t}),(0,l.jsx)("div",{children:s})]})})}function u(){let[e,t]=(0,n.useState)(""),[s,u]=(0,n.useState)(!1),c=(0,n.useRef)(null),i=(0,r.IT)(a.messages.list);return((0,n.useEffect)(()=>{var e;null==(e=c.current)||e.scrollIntoView({behavior:"smooth"})},[]),s)?(0,l.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between bg-blue-500 p-4 text-white",children:[(0,l.jsx)("h1",{className:"font-bold text-xl",children:"Chat App"}),(0,l.jsxs)("div",{children:["Logged in as: ",e]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[i?i.map(t=>(0,l.jsx)(d,{author:t.author,text:t.text,isCurrentUser:t.author===e},t._id)):(0,l.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,l.jsx)("p",{children:"Loading messages..."})}),(0,l.jsx)("div",{ref:c})]}),(0,l.jsx)(o,{username:e})]}):(0,l.jsx)("div",{className:"flex h-screen flex-col items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"w-full max-w-md rounded-lg border p-8 shadow-md",children:[(0,l.jsx)("h1",{className:"mb-6 text-center font-bold text-2xl",children:"Welcome to Chat"}),(0,l.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&u(!0)},className:"flex flex-col gap-4",children:[(0,l.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your username",className:"rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:outline-none"}),(0,l.jsx)("button",{type:"submit",className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:outline-none",children:"Start Chatting"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[301,359,90,272,358],()=>t(4420)),_N_E=e.O()}]);