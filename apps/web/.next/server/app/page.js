(()=>{var e={};e.id=974,e.ids=[974],e.modules={276:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(4693),s=r(5488);function i(){return(0,n.jsx)(s.Chat,{})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2164:()=>{},2640:(e,t,r)=>{Promise.resolve().then(r.bind(r,2885))},2745:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u});var n=r(8231),s=r(2328),i=r(6346),o=r.n(i),a=r(1837),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,276)),"/home/ubuntu/repos/construct/apps/web/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9151)),"/home/ubuntu/repos/construct/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,4534,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,7407,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,3492,23)),"next/dist/client/components/unauthorized-error"]}],c=["/home/ubuntu/repos/construct/apps/web/src/app/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},2885:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>o});var n=r(3487),s=r(6395);let i=new s.eH("https://useful-capybara-538.convex.cloud");function o({children:e}){return(0,n.jsx)(s.hD,{client:i,children:e})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3116:(e,t,r)=>{Promise.resolve().then(r.bind(r,4317))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4317:(e,t,r)=>{"use strict";r.d(t,{Chat:()=>eC});var n=r(3487),s=r(6395),i=r(922),o=r(5080),a=r(2609),l=r(9405);function u(e,t){if("undefined"==typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(e,JSON.stringify(t)))}async function c(e,t){let r;if("undefined"==typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{r=await Convex.asyncSyscall(e,JSON.stringify(t))}catch(e){if(void 0!==e.data){let t=new a.i(e.message);throw t.data=(0,l.du)(e.data),t}throw Error(e.message)}return JSON.parse(r)}r(2142);var d=Object.defineProperty,h=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t,r)=>h(e,"symbol"!=typeof t?t+"":t,r);class m{constructor(){p(this,"_isExpression"),p(this,"_value")}}var f=Object.defineProperty,v=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t,r)=>v(e,"symbol"!=typeof t?t+"":t,r);class b extends m{constructor(e){super(),y(this,"inner"),this.inner=e}serialize(){return this.inner}}function x(e){return e instanceof b?e.serialize():{$literal:(0,l.cy)(e)}}let g={eq(e,t){if("string"!=typeof e)throw Error("The first argument to `q.eq` must be a field name.");return new b({$eq:[x(new b({$field:e})),x(t)]})},or:(...e)=>new b({$or:e.map(x)})};var w=Object.defineProperty,j=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t,r)=>j(e,"symbol"!=typeof t?t+"":t,r);class C{constructor(){P(this,"_isExpression"),P(this,"_value")}}var q=Object.defineProperty,_=(e,t,r)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t,r)=>_(e,"symbol"!=typeof t?t+"":t,r);class $ extends C{constructor(e){super(),E(this,"inner"),this.inner=e}serialize(){return this.inner}}function S(e){return e instanceof $?e.serialize():{$literal:(0,l.cy)(e)}}let I={eq:(e,t)=>new $({$eq:[S(e),S(t)]}),neq:(e,t)=>new $({$neq:[S(e),S(t)]}),lt:(e,t)=>new $({$lt:[S(e),S(t)]}),lte:(e,t)=>new $({$lte:[S(e),S(t)]}),gt:(e,t)=>new $({$gt:[S(e),S(t)]}),gte:(e,t)=>new $({$gte:[S(e),S(t)]}),add:(e,t)=>new $({$add:[S(e),S(t)]}),sub:(e,t)=>new $({$sub:[S(e),S(t)]}),mul:(e,t)=>new $({$mul:[S(e),S(t)]}),div:(e,t)=>new $({$div:[S(e),S(t)]}),mod:(e,t)=>new $({$mod:[S(e),S(t)]}),neg:e=>new $({$neg:S(e)}),and:(...e)=>new $({$and:e.map(S)}),or:(...e)=>new $({$or:e.map(S)}),not:e=>new $({$not:S(e)}),field:e=>new $({$field:e})};var N=Object.defineProperty,k=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t,r)=>k(e,"symbol"!=typeof t?t+"":t,r);class A{constructor(){T(this,"_isIndexRange")}}var O=Object.defineProperty,R=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,J=(e,t,r)=>R(e,"symbol"!=typeof t?t+"":t,r);class Q extends A{constructor(e){super(),J(this,"rangeExpressions"),J(this,"isConsumed"),this.rangeExpressions=e,this.isConsumed=!1}static new(){return new Q([])}consume(){if(this.isConsumed)throw Error("IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes");this.isConsumed=!0}eq(e,t){return this.consume(),new Q(this.rangeExpressions.concat({type:"Eq",fieldPath:e,value:(0,l.cy)(t)}))}gt(e,t){return this.consume(),new Q(this.rangeExpressions.concat({type:"Gt",fieldPath:e,value:(0,o.rz)(t)}))}gte(e,t){return this.consume(),new Q(this.rangeExpressions.concat({type:"Gte",fieldPath:e,value:(0,o.rz)(t)}))}lt(e,t){return this.consume(),new Q(this.rangeExpressions.concat({type:"Lt",fieldPath:e,value:(0,o.rz)(t)}))}lte(e,t){return this.consume(),new Q(this.rangeExpressions.concat({type:"Lte",fieldPath:e,value:(0,o.rz)(t)}))}export(){return this.consume(),this.rangeExpressions}}var z=Object.defineProperty,F=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t,r)=>F(e,"symbol"!=typeof t?t+"":t,r);class M{constructor(){D(this,"_isSearchFilter")}}function V(e,t,r,n){if(void 0===e)throw TypeError(`Must provide arg ${t} \`${n}\` to \`${r}\``)}var G=Object.defineProperty,B=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t,r)=>B(e,"symbol"!=typeof t?t+"":t,r);class W extends M{constructor(e){super(),L(this,"filters"),L(this,"isConsumed"),this.filters=e,this.isConsumed=!1}static new(){return new W([])}consume(){if(this.isConsumed)throw Error("SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.");this.isConsumed=!0}search(e,t){return V(e,1,"search","fieldName"),V(t,2,"search","query"),this.consume(),new W(this.filters.concat({type:"Search",fieldPath:e,value:t}))}eq(e,t){return V(e,1,"eq","fieldName"),2!=arguments.length&&V(t,2,"search","value"),this.consume(),new W(this.filters.concat({type:"Eq",fieldPath:e,value:(0,l.cy)(t)}))}export(){return this.consume(),this.filters}}var H=r(1585),K=Object.defineProperty,U=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t,r)=>U(e,"symbol"!=typeof t?t+"":t,r);function Y(e){throw Error("consumed"===e?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}Symbol.asyncIterator;class Z{constructor(e){X(this,"state"),this.state={type:"preparing",query:e}}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let e=this.state.query;return this.state={type:"closed"},e}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&Y(this.state.type);let{queryId:e}=u("1.0/queryStream",{query:this.state.query,version:H.r});return this.state={type:"executing",queryId:e},e}closeQuery(){"executing"===this.state.type&&u("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(e){V(e,1,"order","order");let t=this.takeQuery();if("Search"===t.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==t.source.order)throw Error("Queries may only specify order at most once");return t.source.order=e,new Z(t)}filter(e){V(e,1,"filter","predicate");let t=this.takeQuery();return t.operators.push({filter:S(e(I))}),new Z(t)}limit(e){V(e,1,"limit","n");let t=this.takeQuery();return t.operators.push({limit:e}),new Z(t)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&Y(this.state.type);let e="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:t,done:r}=await c("1.0/queryStreamNext",{queryId:e});return r&&this.closeQuery(),{value:(0,o.du)(t),done:r}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(e){if(V(e,1,"paginate","options"),"number"!=typeof e?.numItems||e.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${e?.numItems}\`.`);let t=this.takeQuery(),r=e.numItems,n=e.cursor,s=e?.endCursor??null,i=e.maximumRowsRead??null,{page:a,isDone:l,continueCursor:u,splitCursor:d,pageStatus:h}=await c("1.0/queryPage",{query:t,cursor:n,endCursor:s,pageSize:r,maximumRowsRead:i,maximumBytesRead:e.maximumBytesRead,version:H.r});return{page:a.map(e=>(0,o.du)(e)),isDone:l,continueCursor:u,splitCursor:d,pageStatus:h}}async collect(){let e=[];for await(let t of this)e.push(t);return e}async take(e){V(e,1,"take","n");if(!Number.isInteger(e)||e<0)throw TypeError("Arg 1 `n` to `take` must be a non-negative integer");return this.limit(e).collect()}async first(){let e=await this.take(1);return 0===e.length?null:e[0]}async unique(){let e=await this.take(2);if(0===e.length)return null;if(2===e.length)throw Error(`unique() query returned more than one result: 
 [${e[0]._id}, ${e[1]._id}, ...]`);return e[0]}}async function ee(e,t){if(validateArg(e,1,"get","id"),"string"!=typeof e)throw Error(`Invalid argument \`id\` for \`db.get\`, expected string but got '${typeof e}': ${e}`);let r={id:convexToJson(e),isSystem:t,version};return jsonToConvex(await performAsyncSyscall("1.0/get",r))}async function et(e,t){if(e.startsWith("_"))throw Error("System tables (prefixed with `_`) are read-only.");return validateArg(e,1,"insert","table"),validateArg(t,2,"insert","value"),jsonToConvex(await performAsyncSyscall("1.0/insert",{table:e,value:convexToJson(t)}))._id}async function er(e,t){validateArg(e,1,"patch","id"),validateArg(t,2,"patch","value"),await performAsyncSyscall("1.0/shallowMerge",{id:convexToJson(e),value:patchValueToJson(t)})}async function en(e,t){validateArg(e,1,"replace","id"),validateArg(t,2,"replace","value"),await performAsyncSyscall("1.0/replace",{id:convexToJson(e),value:convexToJson(t)})}async function es(e){validateArg(e,1,"delete","id"),await performAsyncSyscall("1.0/remove",{id:convexToJson(e)})}var ei=r(8423);ei.v.object({numItems:ei.v.number(),cursor:ei.v.union(ei.v.string(),ei.v.null()),endCursor:ei.v.optional(ei.v.union(ei.v.string(),ei.v.null())),id:ei.v.optional(ei.v.number()),maximumRowsRead:ei.v.optional(ei.v.number()),maximumBytesRead:ei.v.optional(ei.v.number())});var eo=r(9845),ea=Object.defineProperty,el=Object.defineProperty,eu=Object.defineProperty,ec=(e,t,r)=>t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ed=(e,t,r)=>ec(e,"symbol"!=typeof t?t+"":t,r);class eh{constructor(e,t){ed(this,"_definition"),ed(this,"_name"),this._definition=e,this._name=t,setReferencePath(this,`_reference/childComponent/${t}`)}get exports(){return function e(t,r){return new Proxy({},{get(n,s){if("string"==typeof s)return e(t,[...r,s]);if(s===toReferencePath){let e=`_reference/childComponent/${t}`;for(let t of r)e+=`/${t}`;return e}}})}(this._name,[])}}function ep(e){let t=[];for(let[r,n]of Object.entries(e)){let e;e="string"==typeof n?{type:"leaf",leaf:n}:ep(n),t.push([r,e])}return{type:"branch",branch:t}}function em(e){return e.map(([e,t,r])=>{let n=null;if(null!==r)for(let[e,t]of(n=[],Object.entries(r)))void 0!==t&&n.push([e,{type:"value",value:JSON.stringify(convexToJson(t))}]);let s=t.componentDefinitionPath;if(!s)throw Error("no .componentPath for component definition "+JSON.stringify(t,null,2));return{name:e,path:s,args:n}})}var ef=Object.defineProperty,ev=(e,t,r)=>t in e?ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ey=(e,t,r)=>ev(e,"symbol"!=typeof t?t+"":t,r);class eb{constructor(e){ey(this,"indexes"),ey(this,"searchIndexes"),ey(this,"vectorIndexes"),ey(this,"validator"),this.indexes=[],this.searchIndexes=[],this.vectorIndexes=[],this.validator=e}index(e,t){return this.indexes.push({indexDescriptor:e,fields:t}),this}searchIndex(e,t){return this.searchIndexes.push({indexDescriptor:e,searchField:t.searchField,filterFields:t.filterFields||[]}),this}vectorIndex(e,t){return this.vectorIndexes.push({indexDescriptor:e,vectorField:t.vectorField,dimensions:t.dimensions,filterFields:t.filterFields||[]}),this}self(){return this}export(){return{indexes:this.indexes,searchIndexes:this.searchIndexes,vectorIndexes:this.vectorIndexes,documentType:this.validator.json}}}function ex(e){return new eb((0,ei.d)(e)?e:ei.v.object(e))}class eg{constructor(e,t){ey(this,"tables"),ey(this,"strictTableNameTypes"),ey(this,"schemaValidation"),this.tables=e,this.schemaValidation=t?.schemaValidation===void 0||t.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([e,t])=>{let{indexes:r,searchIndexes:n,vectorIndexes:s,documentType:i}=t.export();return{tableName:e,indexes:r,searchIndexes:n,vectorIndexes:s,documentType:i}}),schemaValidation:this.schemaValidation})}}new eg({_scheduled_functions:ex({name:ei.v.string(),args:ei.v.array(ei.v.any()),scheduledTime:ei.v.float64(),completedTime:ei.v.optional(ei.v.float64()),state:ei.v.union(ei.v.object({kind:ei.v.literal("pending")}),ei.v.object({kind:ei.v.literal("inProgress")}),ei.v.object({kind:ei.v.literal("success")}),ei.v.object({kind:ei.v.literal("failed"),error:ei.v.string()}),ei.v.object({kind:ei.v.literal("canceled")}))}),_storage:ex({sha256:ei.v.string(),size:ei.v.float64(),contentType:ei.v.optional(ei.v.string())})},void 0);let ew=eo.dp;function ej({username:e}){let[t,r]=(0,i.useState)(""),o=(0,s.n_)(ew.messages.send),a=async n=>{n.preventDefault(),t.trim()&&(await o({text:t,author:e}),r(""))};return(0,n.jsxs)("form",{onSubmit:a,className:"flex gap-2 border-t p-4",children:[(0,n.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Type your message...",className:"flex-1 rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:outline-none"}),(0,n.jsx)("button",{type:"submit",className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:outline-none",children:"Send"})]})}function eP({author:e,text:t,isCurrentUser:r}){return(0,n.jsx)("div",{className:`flex ${r?"justify-end":"justify-start"} mb-4`,children:(0,n.jsxs)("div",{className:`max-w-[70%] break-words rounded-lg px-4 py-2 ${r?"self-end bg-blue-500 text-white":"self-start bg-gray-200 text-gray-800"}`,children:[(0,n.jsx)("div",{className:"font-bold text-sm",children:e}),(0,n.jsx)("div",{children:t})]})})}function eC(){let[e,t]=(0,i.useState)(""),[r,o]=(0,i.useState)(!1),a=(0,i.useRef)(null),l=(0,s.IT)(ew.messages.list);return r?(0,n.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between bg-blue-500 p-4 text-white",children:[(0,n.jsx)("h1",{className:"font-bold text-xl",children:"Chat App"}),(0,n.jsxs)("div",{children:["Logged in as: ",e]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[l?l.map(t=>(0,n.jsx)(eP,{author:t.author,text:t.text,isCurrentUser:t.author===e},t._id)):(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("p",{children:"Loading messages..."})}),(0,n.jsx)("div",{ref:a})]}),(0,n.jsx)(ej,{username:e})]}):(0,n.jsx)("div",{className:"flex h-screen flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md rounded-lg border p-8 shadow-md",children:[(0,n.jsx)("h1",{className:"mb-6 text-center font-bold text-2xl",children:"Welcome to Chat"}),(0,n.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&o(!0)},className:"flex flex-col gap-4",children:[(0,n.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your username",className:"rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:outline-none"}),(0,n.jsx)("button",{type:"submit",className:"rounded-md bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:outline-none",children:"Start Chatting"})]})]})})}},4548:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,7836,23)),Promise.resolve().then(r.t.bind(r,9514,23)),Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,4645,23)),Promise.resolve().then(r.t.bind(r,7521,23)),Promise.resolve().then(r.t.bind(r,2681,23)),Promise.resolve().then(r.t.bind(r,8369,23)),Promise.resolve().then(r.t.bind(r,5499,23))},4972:(e,t,r)=>{Promise.resolve().then(r.bind(r,5488))},5488:(e,t,r)=>{"use strict";r.d(t,{Chat:()=>n});let n=(0,r(8571).registerClientReference)(function(){throw Error("Attempted to call Chat() from the server but Chat is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/repos/construct/apps/web/src/app/components/Chat.tsx","Chat")},7284:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2042,23)),Promise.resolve().then(r.t.bind(r,8548,23)),Promise.resolve().then(r.t.bind(r,2168,23)),Promise.resolve().then(r.t.bind(r,7683,23)),Promise.resolve().then(r.t.bind(r,8867,23)),Promise.resolve().then(r.t.bind(r,2939,23)),Promise.resolve().then(r.t.bind(r,5995,23)),Promise.resolve().then(r.t.bind(r,341,23))},9088:(e,t,r)=>{Promise.resolve().then(r.bind(r,9471))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>a});var n=r(4693);r(2164);var s=r(837),i=r.n(s),o=r(9471);let a={title:"Chat App",description:"A simple chat application built with Convex",icons:[{rel:"icon",url:"/favicon.ico"}]};function l({children:e}){return(0,n.jsx)("html",{lang:"en",className:`${i().variable}`,children:(0,n.jsx)("body",{children:(0,n.jsx)(o.Providers,{children:e})})})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9471:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>n});let n=(0,r(8571).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/repos/construct/apps/web/src/app/providers.tsx","Providers")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[155],()=>r(2745));module.exports=n})();